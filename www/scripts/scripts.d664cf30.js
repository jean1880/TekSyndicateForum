"use strict";angular.module("tekForumApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","LocalStorageModule","infinite-scroll"]).config(["$routeProvider","localStorageServiceProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:id",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/topic/:id",{templateUrl:"views/topic.html",controller:"TopicCtrl"}).otherwise({redirectTo:"/"}),b.setPrefix("TekForum")}]),angular.module("tekForumApp").controller("MainCtrl",["$scope","FactoryCategory","FactoryTopic","$cookies","localStorageService","$routeParams",function(a,b,c,d,e,f){a.GetCategories=function(){b.get().success(function(b){console.log(b),a.categoryList=b.category_list.categories,e.set("categoryList",JSON.stringify(b.category_list.categories))})},a.GetTopics=function(){f.id?c.getLatestCategory(f.id).success(function(b){console.log(b),a.topicList=b.topic_list.topics}):c.getLatest().success(function(b){console.log(b),a.topicList=b.topic_list.topics,e.set("topicList",JSON.stringify(b.topic_list.topics))})},a.init=function(){d["XSRF-TOKEN"]="M8JjiA4/pV6L2pR94qd4BQMoaCmLXsmgLks7xdNd+HA=",a.categoryList=e.get("categoryList"),a.topicList=e.get("topicList"),a.GetCategories(),a.GetTopics()},a.init()}]),angular.module("tekForumApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("tekForumApp").factory("FactoryCategory",["$http","ServerAddress",function(a,b){return{get:function(){return a.get(b+"categories.json")}}}]),angular.module("tekForumApp").factory("FactoryTopic",["$http","ServerAddress",function(a,b){return{get:function(c){return a.get(b+"t/"+c+".json")},getLatest:function(){return a.get(b+"latest.json")},getLatestCategory:function(c){return a.get(b+"/c/"+c+"/l/latest.json")},getPosts:function(c,d){return a.get(b+"t/"+c+"/posts.json?"+d)}}}]),angular.module("tekForumApp").factory("FactoryPost",["$http","ServerAddress",function(a,b){return{get:function(c){return a.get(b+"posts.json?"+c)}}}]),angular.module("tekForumApp").factory("FactoryUser",function(){var a=42;return{someMethod:function(){return a}}}),angular.module("tekForumApp").factory("FactoryBadge",function(){var a=42;return{someMethod:function(){return a}}}),angular.module("tekForumApp").factory("FactoryNotification",function(){var a=42;return{someMethod:function(){return a}}}),angular.module("tekForumApp").factory("FactoryPrivateMessage",function(){var a=42;return{someMethod:function(){return a}}}),angular.module("tekForumApp").constant("ServerAddress","https://forum.teksyndicate.com/"),angular.module("tekForumApp").controller("TopicCtrl",["$scope","$routeParams","FactoryTopic","$timeout",function(a,b,c,d){a.init=function(){c.get(b.id).success(function(b){a.topic=b,a.postCount=b.post_stream.posts.length,a.MAXPOSTCOUNT=b.posts_count,a.FormatImages(),console.log(a.topic)})},a.FormatImages=function(){d(function(){$("#topic-board").find("img").each(function(){$(this).addClass("img img-responsive"),$(this).attr("src").match("^http")||$(this).attr("src","https://"+$(this).attr("src"))})},300)},a.FetchPosts=function(){if(a.postCount<a.MAXPOSTCOUNT){for(var b,d="",e=0;20>e&&a.topic.post_stream.stream[e+a.postCount];e++)1==e&&(d="&"),b=b+d+"post_ids%5B%5D="+a.topic.post_stream.stream[e+a.postCount];a.postCount+=20,c.getPosts(a.topic.id,b).success(function(b){a.topic.post_stream.posts.push.apply(a.topic.post_stream.posts,b.post_stream.posts),a.FormatImages()})}},a.init()}]),angular.module("tekForumApp").filter("Sanitize",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),$(document).on("click","a:not(.local)",function(a){a.preventDefault(),window.open($(a.target).attr("href"),"_system")});